<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Lydia Hsu">
<meta name="dcterms.date" content="2025-03-20">
<meta name="description" content="Check out this project on my Github  This project is where natural language processing meets career search! I worked as the data scientist in the team and designed a job recommendation system that helps users identify roles aligned with their skills, straight from their uploaded resume. Built using Streamlit, the app leverages classic NLP techniques and custom logic to deliver fast, personalized results.">

<title>Building a Job Rec System – Lydia’s Portfolio</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-bc2b725569e1fa8344dc5bdb188ef96a.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-1f73f565c80f8bd926b670020a3226e0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<!-- Critical CSS for immediate application to prevent glitches -->
<style id="critical-preload-styles">
/* Hide cards initially to prevent flash of unstyled content */
.quarto-grid-item, .card.h-100 {
  opacity: 0 !important;
  visibility: hidden !important;
  transform: translateZ(0) !important;
  will-change: opacity, transform !important;
  transition: none !important;
}

/* Add overlay to hide content until fully loaded */
body::before {
  content: "" !important;
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  background-color: white !important;
  z-index: 9999 !important;
  opacity: 1 !important;
  transition: opacity 0.3s ease !important;
}

/* Pre-define card styles to prevent layout shifts */
.quarto-grid-item, .card.h-100 {
  height: 480px !important;
  min-height: 480px !important;
  max-height: 480px !important;
  display: flex !important;
  flex-direction: column !important;
  overflow: hidden !important;
  position: relative !important;
  border-radius: 8px !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08) !important;
  background-color: white !important;
}

/* Pre-define card body styles */
.quarto-grid-item .card-body, 
.card.h-100 .post-contents {
  height: 70% !important;
  min-height: 70% !important;
  max-height: 70% !important;
  padding: 1rem 1.2rem 1.5rem !important;
  display: flex !important;
  flex-direction: column !important;
  position: relative !important;
}

/* Pre-define image container styles */
.quarto-grid-item p.card-img-top, 
.card.h-100 p.card-img-top {
  height: 30% !important;
  min-height: 30% !important;
  max-height: 30% !important;
  margin: 0 !important;
  padding: 0 !important;
  overflow: hidden !important;
  line-height: 0 !important;
}
</style>

<!-- Remove the overlay when page is ready -->
<script>
(function() {
  function removeOverlay() {
    const overlay = document.getElementById('critical-preload-styles');
    if (overlay) {
      overlay.remove();
    }
  }
  
  // Wait for everything to be loaded
  window.addEventListener('load', function() {
    setTimeout(removeOverlay, 100);
  });
})();
</script> 
<!-- Direct fix for CV link in sidebar -->
<style>
/* Direct CSS fix for CV link */
a[href$="cv.html"],
a[href$="cv.qmd"],
a[href*="cv.html"],
a[href*="cv.qmd"],
.sidebar a[href*="cv"],
.sidebar-item a[href*="cv"],
.sidebar-item-text[href*="cv"],
li a[href*="cv"],
.sidebar-navigation .sidebar-item-container a[href*="cv"],
.sidebar-items-container .sidebar-item-container a[href*="cv"] {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  pointer-events: auto !important;
  cursor: pointer !important;
}

/* Ensure CV sidebar item and its container are visible and interactive */
.sidebar-item:has(a[href*="cv"]),
.sidebar-item-container:has(a[href*="cv"]) {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  pointer-events: auto !important;
  height: auto !important;
  min-height: 40px !important;
  overflow: visible !important;
}

/* Menu text within CV links */
a[href*="cv"] .menu-text {
  display: inline-block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* Ensure hover styling works */
.sidebar a[href*="cv"]:hover {
  color: rgba(255, 255, 255, 0.8) !important;
  background-color: rgba(255, 255, 255, 0.1) !important;
}
</style>

<script>
// Immediate execution to fix CV link
(function() {
  // Create a directly clickable CV link that replaces the current one
  function createDirectCVLink() {
    try {
      // Find existing CV link in sidebar
      const sidebarItems = document.querySelectorAll('.sidebar-item');
      
      for (let i = 0; i < sidebarItems.length; i++) {
        const item = sidebarItems[i];
        const link = item.querySelector('a[href*="cv"]');
        
        if (link) {
          // Get href from existing link
          const href = link.getAttribute('href');
          
          // Create replacement link
          const newLink = document.createElement('a');
          newLink.setAttribute('href', href);
          newLink.setAttribute('class', link.getAttribute('class') || 'sidebar-item-text sidebar-link');
          newLink.innerHTML = '<span class="menu-text">CV</span>';
          newLink.style.display = 'block';
          newLink.style.visibility = 'visible';
          newLink.style.opacity = '1';
          newLink.style.padding = '0.5rem 0.5rem 0.5rem 1rem';
          newLink.style.color = 'rgba(255, 255, 255, 0.55)';
          newLink.style.textDecoration = 'none';
          newLink.style.pointerEvents = 'auto';
          newLink.style.cursor = 'pointer';
          
          // Replace existing link with new one
          const container = link.parentNode;
          if (container) {
            container.innerHTML = '';
            container.appendChild(newLink);
            container.style.display = 'block';
            container.style.visibility = 'visible';
            container.style.opacity = '1';
            container.style.pointerEvents = 'auto';
          }
          
          // Ensure parent item is visible
          item.style.display = 'block';
          item.style.visibility = 'visible';
          item.style.opacity = '1';
          
          // Add direct click handler
          newLink.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            window.location.href = href;
          });
        }
      }
    } catch (e) {
      console.error('Error fixing CV link:', e);
    }
  }

  // Execute immediately
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', createDirectCVLink);
  } else {
    createDirectCVLink();
  }
  
  // Also run after a delay
  setTimeout(createDirectCVLink, 100);
  setTimeout(createDirectCVLink, 500);
})();
</script> 
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>👩🏻‍💻</text></svg>">
<title>Lydia's Portfolio</title>
<script>
  // Immediate execution to set title before page renders
  document.title = "Lydia's Portfolio";
</script>

<!-- Remove CV page links -->
<!-- 
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Remove any links to CV page
  document.querySelectorAll('a[href*="cv.qmd"], a[href*="cv.html"]').forEach(function(link) {
    link.style.display = 'none';
    link.style.visibility = 'hidden';
    
    // If it's in the sidebar, remove the entire list item
    if (link.closest('.sidebar-item')) {
      const item = link.closest('.sidebar-item');
      if (item) {
        item.style.display = 'none';
        item.style.visibility = 'hidden';
      }
    }
  });
});
</script>
-->

<!-- Script to ensure CV link is visible -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Make sure CV links are visible
  document.querySelectorAll('a[href*="cv.qmd"], a[href*="cv.html"]').forEach(function(link) {
    link.style.display = 'block';
    link.style.visibility = 'visible';
    link.style.opacity = '1';
    
    // If it's in the sidebar, make the entire item visible
    if (link.closest('.sidebar-item')) {
      const item = link.closest('.sidebar-item');
      if (item) {
        item.style.display = 'block';
        item.style.visibility = 'visible';
        item.style.opacity = '1';
      }
    }
  });
});
</script>

<!-- Load mermaid directly in head for better diagram rendering -->
<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
<script>
  // Initialize mermaid with custom configuration
  mermaid.initialize({
    startOnLoad: true,
    theme: 'default',
    securityLevel: 'loose',
    fontFamily: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif',
    flowchart: {
      htmlLabels: true,
      curve: 'basis'
    },
    themeVariables: {
      primaryColor: '#B25D4C',
      primaryTextColor: '#2C3E50',
      primaryBorderColor: '#B25D4C',
      lineColor: '#B25D4C',
      secondaryColor: 'rgba(178, 93, 76, 0.1)',
      tertiaryColor: '#fff'
    }
  });
</script>

<!-- Meta tag to help with mermaid diagrams -->
<meta name="mermaid-theme" content="default">

<!-- Critical CSS loaded at the earliest possible moment -->
<style>
/* Ultra-high priority fixes to prevent FOUC and glitches */
.quarto-grid-item, .card.h-100 {
  height: 480px !important;
  min-height: 480px !important;
  max-height: 480px !important;
  display: flex !important;
  flex-direction: column !important;
  overflow: hidden !important;
}

.quarto-grid-item .listing-title, 
.card.h-100 .card-title.listing-title {
  display: block !important;
  max-height: 5rem !important;
  overflow: hidden !important;
  visibility: visible !important;
  opacity: 1 !important;
}

.quarto-grid-item p.card-img-top, 
.card.h-100 p.card-img-top {
  height: 30% !important;
  overflow: hidden !important;
}

.quarto-grid-item .card-body, 
.card.h-100 .post-contents {
  height: 70% !important;
  position: relative !important;
}

/* Critical category tag styling */
.listing-categories, .quarto-categories {
  display: flex !important;
  flex-wrap: wrap !important;
  gap: 0.4rem !important;
  align-items: flex-start !important;
  justify-content: flex-start !important;
  min-height: 1.8rem !important;
  width: 100% !important;
}

.listing-category, .quarto-category {
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  height: 1.4rem !important;
  padding: 0.2rem 0.5rem !important;
  font-size: 0.65rem !important;
  line-height: 1 !important;
  text-transform: uppercase !important;
  border-radius: 4px !important;
  background-color: rgba(191, 211, 230, 0.25) !important;
  white-space: nowrap !important;
  margin: 0 !important;
}

/* Pandas-specific styles */
.dataframe,
.dataframe *,
table.dataframe,
table.dataframe * {
  color: #444444 !important;
}

/* Keep rendered diagrams visible */
.mermaid:not(.sourceCode),
.mermaid svg,
.job-rec-diagram .mermaid,
.diagram-container .mermaid {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  height: auto !important;
  background-color: transparent !important;
  margin: 2rem auto !important;
}
</style>

<!-- Preload key JavaScript -->
<link rel="preload" href="js/title-refresh-fix.js" as="script">
<link rel="preload" href="js/listing-refresh.js" as="script">

<!-- Mobile sidebar toggle button -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Check if we're on a mobile device
    if (window.innerWidth <= 768) {
      // Create the toggle button
      const toggleButton = document.createElement('button');
      toggleButton.className = 'sidebar-toggle';
      toggleButton.innerHTML = '☰';
      toggleButton.setAttribute('aria-label', 'Toggle sidebar');
      document.body.appendChild(toggleButton);
      
      // Create overlay
      const overlay = document.createElement('div');
      overlay.className = 'sidebar-overlay';
      document.body.appendChild(overlay);
      
      // Get the sidebar
      const sidebar = document.getElementById('quarto-sidebar');
      
      // Toggle sidebar function
      function toggleSidebar() {
        sidebar.classList.toggle('sidebar-visible');
        document.body.classList.toggle('sidebar-visible');
        overlay.classList.toggle('visible');
      }
      
      // Add click event to button
      toggleButton.addEventListener('click', toggleSidebar);
      
      // Close when clicking overlay
      overlay.addEventListener('click', toggleSidebar);
      
      // Close sidebar when clicking a link
      const sidebarLinks = sidebar.querySelectorAll('a');
      sidebarLinks.forEach(link => {
        link.addEventListener('click', function() {
          toggleSidebar();
        });
      });
      
      // Close sidebar when pressing Escape key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && sidebar.classList.contains('sidebar-visible')) {
          toggleSidebar();
        }
      });
    }
  });
</script> 
<script>
  // Immediate CV link fix - runs before anything else
  (function() {
    function makeVisible() {
      var cvLinks = document.querySelectorAll('a[href*="cv.html"], a[href*="cv.qmd"]');
      for (var i = 0; i < cvLinks.length; i++) {
        var link = cvLinks[i];
        link.style.display = "block";
        link.style.visibility = "visible";
        link.style.opacity = "1";
        
        // Also make parent containers visible
        var parent = link.parentNode;
        while (parent) {
          if (parent.classList && 
              (parent.classList.contains('sidebar-item') || 
               parent.classList.contains('sidebar-item-container'))) {
            parent.style.display = "block";
            parent.style.visibility = "visible";
            parent.style.opacity = "1";
          }
          parent = parent.parentNode;
        }
      }
    }
    
    // Call immediately
    makeVisible();
    
    // Also when DOM is ready
    document.addEventListener('DOMContentLoaded', makeVisible);
    
    // And after everything else
    window.addEventListener('load', makeVisible);
  })();
</script>

<script src="https://cdn.jsdelivr.net/npm/mermaid@10.3.1/dist/mermaid.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    mermaid.initialize({
      startOnLoad: true,
      theme: 'default'
    });
  });
</script>

<!-- Cross-Device Compatibility Script -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Add device detection classes to the body
    if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
      document.body.classList.add('mobile-device');
      
      if (/iPhone|iPad|iPod/i.test(navigator.userAgent)) {
        document.body.classList.add('ios-device');
      } else if (/Android/i.test(navigator.userAgent)) {
        document.body.classList.add('android-device');
      }
    } else {
      document.body.classList.add('desktop-device');
    }
  });
</script>

<!-- Critical No-Animation CSS - WITH VISIBILITY PRESERVED -->
<style>
  /* Disable animation timings but keep elements visible */
  * {
    animation-duration: 0s !important;
    animation-delay: 0s !important;
    transition-duration: 0s !important;
    transition-delay: 0s !important;
    transition: none !important;
    animation: none !important;
  }
  
  /* Target animation properties only but ensure visibility */
  .quarto-grid-item, .card.h-100, 
  .quarto-grid-item *, .card.h-100 *,
  .listing-image, .thumbnail-image, .card-img-top {
    transition: none !important;
    animation: none !important;
    will-change: auto !important;
    opacity: 1 !important;
    visibility: visible !important;
  }
  
  /* Disable hover/active animations but preserve the elements */
  .quarto-grid-item:hover, .card.h-100:hover,
  .quarto-grid-item:active, .card.h-100:active,
  .quarto-grid-item:focus, .card.h-100:focus {
    animation: none !important;
    transition: none !important;
  }
  
  /* Fix scrollbar issues */
  html {
    overflow-x: hidden;
  }
  
  /* Stabilize images without hiding them */
  img {
    transition: none !important;
    animation: none !important;
    opacity: 1 !important;
    visibility: visible !important;
  }
  
  /* Explicitly ensure card visibility */
  .quarto-grid-item, .card.h-100 {
    opacity: 1 !important;
    visibility: visible !important;
    display: flex !important;
    flex-direction: column !important;
  }
  
  /* Ensure grid is visible */
  .grid, .quarto-grid {
    display: grid !important;
    grid-template-columns: repeat(3, 1fr) !important;
    opacity: 1 !important;
    visibility: visible !important;
  }
</style>

<script>
  // Run once DOM content is loaded - fix CV link clickability
  document.addEventListener('DOMContentLoaded', function() {
    // Find all CV links
    var cvLinks = document.querySelectorAll('a[href*="cv.html"], a[href*="cv.qmd"]');
    
    // Make each link clickable
    cvLinks.forEach(function(link) {
      // Make sure the link is clickable
      link.style.pointerEvents = 'auto';
      link.style.cursor = 'pointer';
      
      // Force all parent elements to have pointer-events: auto
      var parent = link.parentNode;
      while (parent && parent !== document.body) {
        if (parent.style) {
          parent.style.pointerEvents = 'auto';
        }
        parent = parent.parentNode;
      }
      
      // Add direct click handler that ignores parent element click restrictions
      link.addEventListener('click', function(e) {
        e.stopPropagation();
        window.location.href = link.getAttribute('href');
      }, true);
    });
  });
</script>

<style>
  /* Direct CSS override for CV links with !important */
  a[href$="cv.html"],
  a[href$="cv.qmd"],
  a[href*="cv.html"],
  a[href*="cv.qmd"],
  .sidebar-item a[href*="cv"],
  li a[href*="cv"],
  a.cta-button[href*="cv"],
  a.sidebar-item-text[href*="cv"],
  a.btn[href*="cv"],
  .sidebar-navigation .sidebar-item-container a[href*="cv"] {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
  }
  
  /* Force sidebar CV item to be visible */
  .sidebar li.sidebar-item:has(a[href*="cv"]),
  .sidebar .sidebar-item-container:has(a[href*="cv"]) {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
  }
</style>

<style>
  /* Direct fix for CV link vertical alignment in sidebar */
  .sidebar .sidebar-item-container a[href*="cv.qmd"] {
    display: flex !important;
    align-items: center !important;
    height: 40px !important;
    padding: 0.5rem 0.5rem 0.5rem 1rem !important;
    margin: 0 !important;
    text-indent: 0 !important;
    justify-content: flex-start !important;
    text-align: left !important;
    padding-left: 1rem !important;
    box-sizing: border-box !important;
  }

  /* Direct fix for menu text in CV link */
  .sidebar .sidebar-item-container a[href*="cv"] .menu-text {
    display: inline-block !important;
    margin: 0 !important;
    padding: 0 !important;
    text-align: left !important;
    text-indent: 0 !important;
    white-space: nowrap !important;
  }
</style>


<link rel="stylesheet" href="../styles.css">
<link rel="stylesheet" href="../spacing-fix.css">
<link rel="stylesheet" href="../hide-cv.css">
<link rel="stylesheet" href="../show-cv-override.css">
<link rel="stylesheet" href="../cv-link-fix.css">
<link rel="stylesheet" href="../cv-menu-text-fix.css">
<link rel="stylesheet" href="../title-hard-fix.css">
<link rel="stylesheet" href="../post-tag-fix.css">
<link rel="stylesheet" href="../code-fold-fix.css">
<link rel="stylesheet" href="../code-output-fix.css">
<link rel="stylesheet" href="../pandas-fix.css">
<link rel="stylesheet" href="../mermaid-fix.css">
<link rel="stylesheet" href="../card-click-enhancement.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Building a Job Rec System</li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../images/profile/profile.jpg" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      <div class="sidebar-tools-main tools-wide">
    <a href="https://www.linkedin.com/in/lydiatzuchihsu/" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-linkedin"></i></a>
    <a href="https://github.com/tzuchih" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
    <a href="mailto:lydia.tzuchi@gmail.com" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-envelope"></i></a>
</div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../about.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About Me</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../projects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Projects</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cv.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CV</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#key-features-for-users" id="toc-key-features-for-users" class="nav-link active" data-scroll-target="#key-features-for-users">✨ Key Features for Users</a></li>
  <li><a href="#result-and-flow-chart" id="toc-result-and-flow-chart" class="nav-link" data-scroll-target="#result-and-flow-chart">📈 Result and Flow Chart</a></li>
  <li><a href="#dataset" id="toc-dataset" class="nav-link" data-scroll-target="#dataset">📦 Dataset</a></li>
  <li><a href="#how-it-works-behind-the-scenes" id="toc-how-it-works-behind-the-scenes" class="nav-link" data-scroll-target="#how-it-works-behind-the-scenes">🧠 How It Works Behind the Scenes</a>
  <ul class="collapse">
  <li><a href="#resume-parsing" id="toc-resume-parsing" class="nav-link" data-scroll-target="#resume-parsing">1. Resume Parsing</a></li>
  <li><a href="#text-preprocessing" id="toc-text-preprocessing" class="nav-link" data-scroll-target="#text-preprocessing">2. Text Preprocessing</a></li>
  <li><a href="#data-preparation" id="toc-data-preparation" class="nav-link" data-scroll-target="#data-preparation">3. Data Preparation</a></li>
  <li><a href="#tf-idf-vectorization" id="toc-tf-idf-vectorization" class="nav-link" data-scroll-target="#tf-idf-vectorization">4. TF-IDF Vectorization</a></li>
  <li><a href="#cosine-similarity-matching" id="toc-cosine-similarity-matching" class="nav-link" data-scroll-target="#cosine-similarity-matching">5. Cosine Similarity Matching</a></li>
  <li><a href="#filtering-options" id="toc-filtering-options" class="nav-link" data-scroll-target="#filtering-options">6. Filtering Options</a></li>
  <li><a href="#skill-gap-analysis" id="toc-skill-gap-analysis" class="nav-link" data-scroll-target="#skill-gap-analysis">7. Skill Gap Analysis</a></li>
  <li><a href="#cover-letter-generator" id="toc-cover-letter-generator" class="nav-link" data-scroll-target="#cover-letter-generator">8. Cover Letter Generator</a></li>
  </ul></li>
  <li><a href="#tools-libraries" id="toc-tools-libraries" class="nav-link" data-scroll-target="#tools-libraries">⚙️ Tools &amp; Libraries</a></li>
  <li><a href="#what-i-gained" id="toc-what-i-gained" class="nav-link" data-scroll-target="#what-i-gained">💡 What I Gained</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Building a Job Rec System</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Python</div>
    <div class="quarto-category">NLP</div>
    <div class="quarto-category">NLTK</div>
    <div class="quarto-category">Scikit-learn</div>
    <div class="quarto-category">Streamlit</div>
  </div>
  </div>

<div>
  <div class="description">
    <p><a href="https://github.com/tzuchih/Building-a-Job-Rec-System">Check out this project on my Github</a><br> This project is where natural language processing meets career search! I worked as the <strong>data scientist</strong> in the team and designed a job recommendation system that helps users identify roles aligned with their skills, straight from their uploaded resume. Built using Streamlit, the app leverages classic NLP techniques and custom logic to deliver fast, personalized results.</p>
  </div>
</div>


<div class="quarto-title-meta column-body">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Lydia Hsu </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 20, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<style>
/* Hide mermaid code blocks but keep diagrams visible */
.sourceCode.mermaid {
  display: none !important;
  visibility: hidden !important;
  height: 0 !important;
  opacity: 0 !important;
  margin: 0 !important;
  padding: 0 !important;
  overflow: hidden !important;
}

/* Allow the diagram to be rendered with enhanced visibility */
.job-rec-diagram .mermaid,
.mermaid:not(pre):not(code),
.diagram-container .mermaid {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  height: auto !important;
  margin: 2rem auto !important;
  background-color: transparent !important;
  max-width: 100% !important;
}

/* Ensure chart containers are visible */
.diagram-container,
.job-rec-diagram,
.mermaid-wrapper {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  margin: 2rem auto !important;
  max-width: 800px !important;
  background-color: transparent !important;
}

/* Make sure SVG elements in charts are visible */
.mermaid svg,
.diagram-container svg,
.job-rec-diagram svg {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  width: 100% !important;
  max-width: 100% !important;
  height: auto !important;
  min-height: 400px !important;
}

/* Ensure code blocks for mermaid don't show */
div.sourceCode:has(.mermaid) {
  display: none !important; 
  height: 0 !important;
  opacity: 0 !important;
  overflow: hidden !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* Hide code block titles for mermaid */
div.sourceCode:has(.mermaid)::before,
div.sourceCode:has(.mermaid)::after {
  display: none !important;
}
</style>
<!-- Ensure mermaid library is loaded -->
<script src="https://cdn.jsdelivr.net/npm/mermaid@10.3.1/dist/mermaid.min.js"></script>
<script>
// Initialize mermaid with custom configuration
document.addEventListener('DOMContentLoaded', function() {
  mermaid.initialize({
    startOnLoad: true,
    theme: 'default',
    securityLevel: 'loose',
    themeVariables: {
      primaryColor: '#999999',
      primaryTextColor: '#333333',
      primaryBorderColor: '#777777',
      lineColor: '#555555',
      secondaryColor: '#f4f4f4',
      tertiaryColor: '#ffffff'
    },
    flowchart: {
      htmlLabels: true,
      curve: 'basis'
    }
  });
  
  // Force render any mermaid diagrams
  setTimeout(function() {
    mermaid.init(undefined, '.mermaid:not(pre):not(code)');
    
    // Add additional rendering attempt for reliability
    setTimeout(function() {
      mermaid.init(undefined, '.mermaid:not(pre):not(code)');
    }, 1000);
  }, 500);
});
</script>
<p><br></p>
<section id="key-features-for-users" class="level2 no-anchor">
<h2 class="no-anchor" data-anchor-id="key-features-for-users">✨ Key Features for Users</h2>
<ul>
<li><h4 id="quick-resume-upload" class="no-anchor">Quick Resume Upload</h4>
<p>Users can upload their resumes in PDF or DOCX format with just one click—no formatting or manual input required.</p></li>
<li><h4 id="personalized-job-matches" class="no-anchor">Personalized Job Matches</h4>
<p>The system automatically recommends job listings that closely align with the user’s skills, experience, and preferences.</p></li>
<li><h4 id="custom-filters" class="no-anchor">Custom Filters</h4>
<p>Users can filter job recommendations by location, role, industry, or keywords to tailor results to their career goals.</p></li>
<li><h4 id="top-5-matching-jobs" class="no-anchor">Top 5 Matching Jobs</h4>
<p>See your top 5 most relevant job opportunities based on resume-job fit, sorted by similarity score.</p></li>
<li><h4 id="skill-gap-insights" class="no-anchor">Skill Gap Insights</h4>
<p>Instantly view which required skills are missing from your resume, so you can focus on improving them or tailoring your résumé more effectively.</p></li>
<li><h4 id="one-click-cover-letter-draft" class="no-anchor">One-Click Cover Letter Draft</h4>
<p>Choose a job listing, and the system will generate a personalized cover letter draft—saving time and boosting your application quality.</p></li>
</ul>
</section>
<section id="result-and-flow-chart" class="level2 no-anchor">
<h2 class="no-anchor" data-anchor-id="result-and-flow-chart">📈 Result and Flow Chart</h2>
<section id="the-user-interface-of-the-system" class="level4">
<h4 class="anchored" data-anchor-id="the-user-interface-of-the-system">The user interface of the system:</h4>
<p><img src="../../images/posts/nlpsystem.jpg" class="img-fluid"></p>
</section>
<section id="the-process-flow-of-the-system" class="level4">
<h4 class="anchored" data-anchor-id="the-process-flow-of-the-system">The process flow of the system:</h4>
<div class="mermaid-wrapper" style="width:100%; max-width:800px; margin:0 auto 0 auto; position:relative; z-index:10;">
<p><!-- Primary option: iframe with mermaid diagram with balanced height --> <iframe src="../posts/job-rec-diagram.html" width="100%" height="950px" frameborder="0" scrolling="no" style="border:none; overflow:hidden; display:block; visibility:visible; opacity:1; background-color:transparent;"></iframe></p>
<!-- Fallback option: direct embedded mermaid diagram -->
<div class="job-rec-diagram" style="margin-top:0; display:block; visibility:visible; opacity:1;">
<pre><code>&lt;div class="mermaid"&gt;
  flowchart TD
    A1[/"User Upload&lt;br/&gt;Resume"/] --&gt;|"Extract Resume Text"| B1["Preprocess Resume Text&lt;br/&gt;(Remove&lt;br/&gt;Lowercase, Stopwords...)"]
    
    A2{"User Set Preference&lt;br/&gt;(Location, Job&lt;br/&gt;Type, Level)"} --&gt; B2["Filter Job Listings&lt;br/&gt;(Based on User Criteria)"]
    
    B1 &amp; B2 --&gt; C["TF-IDF Vectorization&lt;br/&gt;(Job Description, Resume)"]
    C --&gt; D["Compute Cosine Similarity"]
    D --&gt; E["Find Top Matches"]
    E --&gt; F["Analyze Skill Gaps"]
    F --&gt; G[/"Display Results"/]
    G --&gt; H["Generate Cover Letter"]
    
    classDef parallelogram path,stroke:#9FB2C8,stroke-width:1.5px,fill:transparent;
    classDef diamond rhombus,stroke:#9FB2C8,stroke-width:1.5px,fill:transparent;
    classDef rectangle rect,stroke:#9FB2C8,stroke-width:1.5px,fill:transparent;
    
    class A1 parallelogram;
    class A2 diamond;
    class B1,B2,C,D,E,F,H rectangle;
    class G parallelogram;
&lt;/div&gt;</code></pre>
</div>
<!-- Second fallback: image version -->
<div style="text-align:center; margin-top:0; display:none;">
<pre><code>&lt;img src="../../images/posts/job-rec-diagram.png" alt="Job Recommendation System Flowchart" style="max-width:100%; height:auto; display:block; margin:0 auto;"&gt;</code></pre>
</div>
</div>
<div style="margin-top:-0.5rem;">

</div>
</section>
</section>
<section id="dataset" class="level2 no-anchor">
<h2 class="no-anchor" data-anchor-id="dataset">📦 Dataset</h2>
<p>The job listing dataset was sourced from Kaggle and contains 1.3 million job listings scraped from LinkedIn in the year 2024, including skill requirements, and metadata such as job level, country, and type. I further enriched and cleaned the dataset to make it suitable for text vectorization and matching.</p>
</section>
<section id="how-it-works-behind-the-scenes" class="level2 no-anchor">
<h2 class="no-anchor" data-anchor-id="how-it-works-behind-the-scenes">🧠 How It Works Behind the Scenes</h2>
<section id="resume-parsing" class="level3 no-anchor">
<h3 class="no-anchor" data-anchor-id="resume-parsing">1. Resume Parsing</h3>
<p>Users upload a resume (PDF or DOCX), and I use pdfminer and python-docx to extract raw text. This ensures the system can handle a wide range of formatting.</p>
</section>
<section id="text-preprocessing" class="level3 no-anchor">
<h3 class="no-anchor" data-anchor-id="text-preprocessing">2. Text Preprocessing</h3>
<p>A custom clean_text() function prepares the text by:</p>
<ul>
<li>Lowercasing all characters</li>
<li>Removing numbers and punctuation</li>
<li>Tokenizing the text</li>
<li>Removing stopwords with NLTK</li>
<li>Lemmatizing each token</li>
</ul>
<p>This helps standardize the content from both resumes and job descriptions.</p>
</section>
<section id="data-preparation" class="level3 no-anchor">
<h3 class="no-anchor" data-anchor-id="data-preparation">3. Data Preparation</h3>
<p>Each job posting is processed by merging its title and required skills into one text field, which then undergoes the same cleaning pipeline for consistency.</p>
</section>
<section id="tf-idf-vectorization" class="level3 no-anchor">
<h3 class="no-anchor" data-anchor-id="tf-idf-vectorization">4. TF-IDF Vectorization</h3>
<p>I apply TF-IDF with bi-grams, sublinear term frequency, and smoothing to convert the cleaned text into numerical vectors. This approach highlights important skills and phrases while minimizing noise.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_vectorizer_and_vectors(job_data):</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Caches the TF-IDF vectorizer and job text embeddings."""</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    vectorizer <span class="op">=</span> TfidfVectorizer(stop_words<span class="op">=</span><span class="st">'english'</span>, ngram_range<span class="op">=</span>(<span class="dv">1</span>,<span class="dv">2</span>), smooth_idf<span class="op">=</span><span class="va">True</span>, sublinear_tf<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> job_data.empty:</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>        job_vectors <span class="op">=</span> vectorizer.fit_transform(job_data[<span class="st">'clean_text'</span>])</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>        job_vectors <span class="op">=</span> <span class="va">None</span>  <span class="co"># Prevents errors if no jobs exist</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> vectorizer, job_vectors</span></code></pre></div>
</section>
<section id="cosine-similarity-matching" class="level3 no-anchor">
<h3 class="no-anchor" data-anchor-id="cosine-similarity-matching">5. Cosine Similarity Matching</h3>
<p>The resume vector is compared against all job vectors using cosine similarity, generating a match score. To improve interpretability, I normalize the similarity scores to a 0–100 scale.</p>
</section>
<section id="filtering-options" class="level3 no-anchor">
<h3 class="no-anchor" data-anchor-id="filtering-options">6. Filtering Options</h3>
<p>Users can filter jobs by:</p>
<p>🌎 Country, 💼 Job Level, 🏠 Job Type (Onsite, Remote, or Hybrid)</p>
<p>Only filtered jobs are vectorized—making the system both efficient and responsive.</p>
</section>
<section id="skill-gap-analysis" class="level3 no-anchor">
<h3 class="no-anchor" data-anchor-id="skill-gap-analysis">7. Skill Gap Analysis</h3>
<p>Each job match also includes:</p>
<p>✅ Matched Skills you already have</p>
<p>❌ Missing Skills to work on</p>
<p>This makes recommendations actionable for job seekers.</p>
</section>
<section id="cover-letter-generator" class="level3 no-anchor">
<h3 class="no-anchor" data-anchor-id="cover-letter-generator">8. Cover Letter Generator</h3>
<p>Select a job, click a button, and the system drafts a personalized cover letter based on the role, skills, and company—great for quickly tailoring applications.</p>
</section>
</section>
<section id="tools-libraries" class="level2 no-anchor">
<h2 class="no-anchor" data-anchor-id="tools-libraries">⚙️ Tools &amp; Libraries</h2>
<ul>
<li>Python, Streamlit, Pandas, NumPy</li>
<li>NLTK for text processing</li>
<li>Scikit-learn for TF-IDF &amp; similarity computation</li>
<li>pdfminer.six &amp; python-docx for file parsing</li>
<li>Kaggle job dataset (custom cleaned)</li>
</ul>
</section>
<section id="what-i-gained" class="level2 no-anchor">
<h2 class="no-anchor" data-anchor-id="what-i-gained">💡 What I Gained</h2>
<p>This project combined everything I love—data wrangling, NLP, real-world problem solving, and user-centered design. It strengthened my skills in building scalable pipelines, working with unstructured data, and developing applications that turn insight into action.</p>


</section>

</main> <!-- /main -->
<!-- Post-processing scripts -->
<script src="../js/mermaid-fix.js"></script>
<script src="../js/home-card-fix.js"></script>
<script src="../js/listing-refresh.js"></script>
<script src="../js/post-tag-fix.js"></script>
<script src="../js/code-toggle.js"></script>
<script src="../js/force-output-display.js"></script>
<script src="../js/mute-dataframe-colors.js"></script>
<script src="../js/debug-outputs.js"></script>
<script src="../js/hide-show-more.js"></script>

<!-- Direct style injection for neutral colors -->
<style id="neutral-output-colors">
  /* Extremely aggressive color neutralization */
  .cell-output, 
  .cell-output-stdout, 
  .cell-output-stderr, 
  .cell-output-display,
  .cell-output *, 
  .cell-output-stdout *, 
  .cell-output-stderr *, 
  .cell-output-display * {
    color: #444444 !important;
  }
  
  .dataframe, 
  .dataframe *,
  table.dataframe,
  table.dataframe *,
  .cell-output table,
  .cell-output table *,
  .jupyter-dataframe,
  .jupyter-dataframe * {
    color: #444444 !important;
  }
  
  /* Target all possible pandas styling classes */
  .text-info, .text-success, .text-warning, .text-danger,
  [class*="color"], [class*="Color"],
  [class*="text-"], [class*="fg-"], [class*="bg-"],
  [style*="color"] {
    color: #444444 !important;
  }
  
  /* Target the exact pandas index styling */
  .index_name, .col_heading, .level_0, .level_1, .level_2, .level_3,
  .row_heading {
    color: #444444 !important;
  }
</style>

<!-- Direct neutralization script -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    function neutralizeOutputColors() {
      console.log('Applying direct color neutralization...');
      
      // Target all output elements
      const outputs = document.querySelectorAll('.cell-output, .cell-output-stdout, .cell-output-stderr, .cell-output-display');
      
      outputs.forEach(output => {
        // Set the container color
        output.style.setProperty('color', '#444444', 'important');
        
        // Set all children elements
        const allElements = output.querySelectorAll('*');
        allElements.forEach(el => {
          el.style.setProperty('color', '#444444', 'important');
          
          // Clear any inline styles that might override
          if (el.hasAttribute('style') && el.getAttribute('style').includes('color')) {
            const currentStyle = el.getAttribute('style');
            const newStyle = currentStyle.replace(/color\s*:\s*[^;]+;?/gi, 'color: #444444 !important;');
            el.setAttribute('style', newStyle);
          }
          
          // Extra handling for table elements
          if (el.tagName === 'TD' || el.tagName === 'TH') {
            el.style.setProperty('color', '#444444', 'important');
          }
        });
      });
    }
    
    // Run immediately and after small delays
    neutralizeOutputColors();
    setTimeout(neutralizeOutputColors, 500);
    setTimeout(neutralizeOutputColors, 1000);
    setTimeout(neutralizeOutputColors, 2000);
  });
</script>

<!-- Script to remove background from diagrams -->
<script>
// Remove backgrounds from diagrams
document.addEventListener('DOMContentLoaded', function() {
  const removeBackgrounds = function() {
    // Look for both custom classes
    const diagrams = document.querySelectorAll('.job-rec-diagram .mermaid svg, .diagram-container .mermaid svg');
    
    diagrams.forEach(svg => {
      if (!svg) return;
      
      // Apply transparent background to SVG
      svg.style.backgroundColor = 'transparent';
      
      // Find and clear all background elements
      svg.querySelectorAll('rect, polygon').forEach(el => {
        if (!el.closest('.node')) {
          el.setAttribute('fill', 'transparent');
          el.style.fill = 'transparent';
        }
      });
      
      // Make all foreignObjects transparent
      svg.querySelectorAll('foreignObject').forEach(el => {
        el.style.backgroundColor = 'transparent';
        el.querySelectorAll('div').forEach(div => {
          div.style.backgroundColor = 'transparent';
        });
      });
    });
  };
  
  // Run at different intervals to catch all rendering phases
  setTimeout(removeBackgrounds, 500);
  setTimeout(removeBackgrounds, 1500);
  setTimeout(removeBackgrounds, 3000); // Extra delay for slower page loads
});
</script>

<!-- Fail-safe CV link fix -->
<script>
  // Add a direct CV link to the sidebar as a fallback
  document.addEventListener('DOMContentLoaded', function() {
    // Check if we can find the CV link in the sidebar
    var existingLink = document.querySelector('.sidebar a[href*="cv.html"], .sidebar a[href*="cv.qmd"]');
    var sidebarItems = document.querySelector('.sidebar-items-container');
    
    if (existingLink && sidebarItems) {
      // Try to make the existing link work by adding an absolute positioned overlay link
      var linkRect = existingLink.getBoundingClientRect();
      var overlayLink = document.createElement('a');
      overlayLink.href = existingLink.getAttribute('href');
      overlayLink.textContent = 'CV';
      overlayLink.style.cssText = `
        position: absolute;
        top: ${linkRect.top}px;
        left: ${linkRect.left}px;
        width: ${linkRect.width}px;
        height: ${linkRect.height}px;
        display: block;
        z-index: 9999;
        opacity: 0.01;
        background: transparent;
        pointer-events: auto;
        cursor: pointer;
      `;
      
      document.body.appendChild(overlayLink);
    }
  });
</script> 
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/www\.example\.com");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<script src="../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>